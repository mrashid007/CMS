@model CoachingManagementSystem.Models.CommonModel.StudentVM

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
    <link href="~/Content/css/MIS/onepcssgrid.css" rel="stylesheet" />
    <link href="~/Content/css/MIS/dbzHtmlPagination.css" rel="stylesheet" />
    <link href="~/Content/css/template.css" rel="stylesheet" />
    <link href="~/Content/css/templateext.css" rel="stylesheet" />
    <link href="~/Content/css/mainside.css" rel="stylesheet" />
    <link href="~/Scripts/JQueryEasyUI/themes/icon.css" rel="stylesheet" />
    <link href="~/Scripts/JQueryEasyUI/themes/gray/easyui.css" rel="stylesheet" />
    <script src="~/Scripts/modernizr-1.7.min.js"></script>
    <script src="~/Scripts/JQueryEasyUI/jquery-1.8.0.min.js"></script>
    <script src="~/Scripts/JQueryEasyUI/jquery.easyui.min.js"></script>
    <script src="~/Scripts/JQueryEasyUI/plugins/jquery.pagination.js"></script>
    <script src="~/Scripts/MIS/jquery-ui-1.8.24.min.js"></script>
    <script src="~/Scripts/MIS/jquery.ui.core.js"></script>
    <script src="~/Scripts/MIS/jquery.ui.widget.js"></script>
    <script src="~/Scripts/MIS/jquery.ui.effect.js"></script>
    <script src="~/Scripts/MIS/jquery.ui.button.js"></script>
    <script src="~/Scripts/MIS/jquery.ui.draggable.js"></script>
    <script src="~/Scripts/MIS/jquery.ui.droppable.js"></script>
    <script src="~/Scripts/MIS/jquery.ui.mouse.js"></script>
    <script src="~/Scripts/MIS/jquery.ui.sortable.js"></script>
    <script src="~/Scripts/MIS/dbzMISPortlets.js"></script>
    <script src="~/Scripts/jquery.validate.js"></script>
    <script src="~/Scripts/DevelopersScripts/dbzValidationChecking.js"></script>
    <script src="~/Scripts/DevelopersScripts/dbzCustomizeEasyUIDataGrid.js"></script>
    <link href="~/Scripts/Toastr/toastr-responsive.css" rel="stylesheet" />
    <link href="~/Scripts/Toastr/toastr.css" rel="stylesheet"/>
    <script src="~/Scripts/Toastr/toastr.js"></script>
    <script src="~/Scripts/DatePicker/DateTimePicker.js"></script>
    <link href="~/Scripts/DatePicker/jquery.ui.datepicker.css" rel="stylesheet" />
    <link href="~/Scripts/DatePicker/DateTimePickerCss.css" rel="stylesheet"/>
    <script src="~/Scripts/jsPDF-1.2.60/jspdf.js"></script>
    <script src="~/Scripts/jsPDF-1.2.60/plugins/from_html.js"></script>
    <script src="~/Scripts/jsPDF-1.2.60/plugins/split_text_to_size.js"></script>
    <script src="~/Scripts/jsPDF-1.2.60/plugins/standard_fonts_metrics.js"></script>
    <script src="~/Scripts/jsPDF-1.2.60/libs/html2canvas/dist/html2canvas.js"></script>
@*<link href="~/Scripts/DatePicker/demos.css" rel="stylesheet" />*@
    <script src="~/Scripts/jsPDF-1.2.60/FileSaver.js"></script>
    <style type="text/css">
        .col1, .col2, .col3, .col4, .col5, .col6, .col7, .col8, .col9, .col10, .col11, .col12 {
            @*background: none repeat scroll 0 0 #801255;
            *@margin-bottom: 5px;
            padding: 2px 0;
        }

        .col7 {
            width: 56.5%;
        }
        .ui-widget {
            font-size: 0.90em;
        } 
        .contentDetails {
            padding-left: 2%;
            padding-top: 1%;
        }
        .ui-datepicker-trigger {
            background-image: url("../../Scripts/JQueryEasyUI/themes/gray/images/datebox_arrow.png" );
            background-repeat: no-repeat;
            border: none;
            width: 16px;
            height: 16px;
        }
            .contentDetails .divLeftPanel {
                text-align: left;
                float: left;
                width: 31%;
            }

            .contentDetails .divRightPanel {
                float: left;
                width: 60%;
            }

        .divLeftPanel {
        }

        .ui-datepicker-trigger {
            background-image: url("../../Scripts/JQueryEasyUI/themes/gray/images/datebox_arrow.png");
            background-repeat: no-repeat;
            border: none;
            width: 16px;
            height: 16px;
        }

        .custom-buttons {
            background-color: #E0E0E0;
            background: -webkit-linear-gradient(top, #E0E0E0 0, #EFEFEF 100%);
            background: -moz-linear-gradient(top, #E0E0E0 0, #EFEFEF 100%);
            background: -o-linear-gradient(top, #E0E0E0 0, #EFEFEF 100%);
            background: linear-gradient(to bottom, #E0E0E0 0, #EFEFEF 100%);
            background-repeat: repeat-x;
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#EFF5FF, endColorstr=#E0ECFF, GradientType=0);
            border-color: #BBBBBB;
            padding: 0px;
            position: relative;
            border-width: 1px;
            border-style: solid;
            min-width: 75px;
        }


            .custom-buttons:hover {
                background-color: #999999;
                background: -webkit-linear-gradient(top, #999999 0, #ABABAB 100%);
                background: -moz-linear-gradient(top, #999999 0, #ABABAB 100%);
                background: -o-linear-gradient(top, #999999 0, #ABABAB 100%);
                background: linear-gradient(to bottom, #999999 0, #ABABAB 100%);
                background-repeat: repeat-x;
                filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#999999, endColorstr=#ABABAB, GradientType=0);
                border-color: #BBBBBB;
                padding: 0px;
                position: relative;
                border-width: 1px;
                border-style: solid;
                min-width: 75px;
                color: #FFFFFF;
            }



        .leftLevelDiv {
            width: 100%;
        }

        .colleft {
            padding: 2px;
            width: 25%;
            float: left;
        }

        .colleftlast {
            padding: 2px;
            width: 60%;
        }

        .colleftlasttd {
            padding: 2px;
            width: 100%;
        }
    </style>
<script type="text/javascript">
    var hdfStdId=0;
    var receiptVm = {};
    $(function () {

        //$('#MoneyReceipt').dialog({
        //    width: 900,
        //    height: 300,
        //    closed: false
        //});

        // alert($('#hdfStudentId').val());

        

        $.ajax({
            url: '/Home/CheckSessionTimeOut',
            type: "POST",
            success: function (result) {
                if (result == "True") {
                    window.top.location = "/Account/Login";
                }
            },
            complete: function () {
                // setupSessionTimeoutCheck();
            }
        });

        $.ajax({
            url: '/Common/GetVat',
            async: false,
            success: function (data) {
                if (data == null || data.length <= 0) {
                    toastr.warning('Vat is Absent');
                    return;
                }
                var vat = data[0].Vat;
                var type = data[0].VatType;
                $("#txtVat").val(vat);
                $("#txtVatType").val(type);
            },
            error: function (result, textStatus, jqXHR) {

            }
        });


        $("#txtNextPaymentDate").datepicker({
            changeMonth: true,
            changeYear: true,
            showWeek: true
        });

        $("#btnFile").change(function () {
            readURL(this);
        });

        LoadExaminations();
        LoadInstitute();
        LoadBoard();
        LoadYear();
        LoadDepartment();
        LoadAdmissionDepartment();
        LoadBatch();

        var id = '@ViewBag.SudentId';
        //alert(id);
        if (id > 0) {
            hdfStdId = id;
            loadStudentToEdit(id);
        }

        $('#txtDiscount').keyup(function() {
            var admfee = $('#txtAdmissionFee').val();
            var discount = $('#txtDiscount').val();
            var vat = $('#txtVat').val();

            if (admfee == '')
                admfee = 0;
            if (discount == '')
                discount = 0;
            if (vat == '')
                vat = 0;
            if ($('#txtVatType').val() == "A") {
                $('#txtTotalAmount').val(parseInt(admfee) - parseInt(discount) + parseInt(vat));
                document.getElementById('<%= lblvattype %>').innerHTM = "TK";
               
            } else {
                $('#txtTotalAmount').val(parseInt(admfee) - parseInt(discount) + parseInt((admfee * vat / 100)));
                document.getElementById('<%= lblvattype %>').innerHTM = "%";
            }
        });
        $('#txtVat').keyup(function () {
            var admfee = $('#txtAdmissionFee').val();
            var discount = $('#txtDiscount').val();
            var vat = $('#txtVat').val();

            if (admfee == '')
                admfee = 0;
            if (discount == '')
                discount = 0;
            if (vat == '')
                vat = 0;

            $('#txtTotalAmount').val(admfee - discount + (admfee * vat / 100));
        });
        $('#txtCollectedAmount').keyup(function() {
            var totalAmnt = $('#txtTotalAmount').val();
            var collectedAmnt = $('#txtCollectedAmount').val();
            if (totalAmnt == '')
                totalAmnt = 0;
            if (collectedAmnt == '')
                collectedAmnt = 0;

            $('#txtdueAmount').val(totalAmnt-collectedAmnt);
        });
       

    });
    function loadStudentToEdit(id) {
        $.ajax({
            url: '/Student/LoadStudentForEdit',
            type: 'post',
            data: JSON.stringify({ id: id }),
            dataType: 'json',
            async: true,
            contentType: 'application/json',
            success: function (result) {
                if (result != null) {
                    $('#hdfStudentId').val(result.StdId);
                    $('#hdfStudentPaymentId').val(result.StudentPaymentId);
                    $('#btnSave').val('Update');
                    $('#lblStudentId').text(result.StudentCode);
                    $('#txtStudentName').val(result.StudentName);
                    $('#txtFatherName').val(result.FatherName);
                    $('#txtMotherName').val(result.MotherName);
                    $('#txtlocalGurdianName').val(result.LocalGurdianName);
                    $('#txtlocalGurdianMobileNo').val(result.LocalGurdianMobile);
                    $('#txtPresentAddress').val(result.PresentAddress);
                    $('#txtParmanentAddress').val(result.ParmanentAddress);
                    $('#txtGurdianMobileNo').val(result.GurdianMobile);
                    $('#txtStudentMobileNo').val(result.StudentMobile);
                    $('#txtEmail').val(result.Email);
                    $('#txtBloodgroup').val(result.BloodGroup);
                    $('#ddlAdmissionDept').val(result.DepartmentId);
                    $('#ddlBatch').val(result.BatchId);
                    $('#txtAdmissionFee').val(result.AddmissionFee);
                    $('#txtVat').val(result.Vat);
                    $('#txtDiscount').val(result.Discount);
                    //$('#txtTotalAmount').val(result.);
                    //$('#txtCollectedAmount').val(result.);
                    //$('#txtdueAmount').val(result.);
                    //$('#txtNextPaymentDate').val(result.);
                    $('#txtRemarks').val(result.Remarks);
                    //alert(result.ImageUrl);
                   // $('#imgbox').attr('src', result.ImageUrl);

                    //jQuery('<img>', {
                    //    src: 'data:image/jpeg;base64,' + payload
                    //}).appendTo(document.body);;

                    
                    if (result.Certificates.length > 0) {
                        ceritificateList = result.Certificates;
                        $('#tblCertificates').datagrid('loadData', ceritificateList);
                    }


                    //$.ajax({
                    //    url: '/Student/GetStudentImage',
                    //    //type: 'post',
                    //    //data: JSON.stringify({ guid: id }),
                    //    dataType: 'json',
                    //    async: true,
                    //    contentType: 'application/json',
                    //    success: function (result) {
                    //        $('#imgbox').val(result);
                    //    }
                    //});


                }
                
                
            }
        });
    }
    function LoadExaminations() {
        $.ajax({
            url: '/Common/LoadExam',
            async: true,
            success: function (result) {
                var mySelect = $('#ddlExam');
                mySelect.append(
                    $('<option></option>').val(0).html('---Select---')
                );
                $.each(result, function (val, text) {
                    mySelect.append(
                        $('<option></option>').val(text.val).html(text.text)
                    );
                });
            },
            error: function (result, textStatus, jqXHR) {

            }
        });
    }
    function LoadYear() {
        $.ajax({
            url: '/Common/LoadYear',
            async: true,
            success: function (result) {
                var mySelect = $('#ddlSession');
                mySelect.append(
                    $('<option></option>').val(0).html('---Select---')
                );
                $.each(result, function (val, text) {
                    mySelect.append(
                        $('<option></option>').val(text.val).html(text.text)
                    );
                });
            },
            error: function (result, textStatus, jqXHR) {

            }
        });
    }
    function LoadInstitute() {
        $.ajax({
            url: '/Common/LoadInstitute',
            async: true,
            success: function (result) {
                var mySelect = $('#ddlInstitute');
                mySelect.append(
                    $('<option></option>').val(0).html('---Select---')
                );
                $.each(result, function (val, text) {
                    mySelect.append(
                        $('<option></option>').val(text.val).html(text.text)
                    );
                });
            },
            error: function (result, textStatus, jqXHR) {

            }
        });
    }
    function LoadBoard() {
        $.ajax({
            url: '/Common/LoadBoard',
            async: true,
            success: function (result) {
                var mySelect = $('#ddlBoard');
                mySelect.append(
                    $('<option></option>').val(0).html('---Select---')
                );
                $.each(result, function (val, text) {
                    mySelect.append(
                        $('<option></option>').val(text.val).html(text.text)
                    );
                });
            },
            error: function (result, textStatus, jqXHR) {

            }
        });
    }

    function LoadDepartment() {
        $.ajax({
            url: '/Common/LoadDepartment',
            async: true,
            success: function (result) {
                var mySelect = $('#ddlDept');
                mySelect.append(
                    $('<option></option>').val(0).html('---Select---')
                );
                $.each(result, function (val, text) {
                    mySelect.append(
                        $('<option></option>').val(text.val).html(text.text)
                    );
                });
            },
            error: function (result, textStatus, jqXHR) {

            }
        });
    }
    function LoadAdmissionDepartment() {
        $.ajax({
            url: '/Common/LoadDepartment',
            async: true,
            success: function (result) {
                var mySelect = $('#ddlAdmissionDept');
                mySelect.append(
                    $('<option></option>').val(0).html('---Select---')
                );
                $.each(result, function (val, text) {
                    mySelect.append(
                        $('<option></option>').val(text.val).html(text.text)
                    );
                });
            },
            error: function (result, textStatus, jqXHR) {

            }
        });
    }

    function LoadBatch() {
        $.ajax({
            url: '/Common/LoadBatch',
            async: true,
            success: function (result) {
                var mySelect = $('#ddlBatch');
                mySelect.append(
                    $('<option></option>').val(0).html('---Select---')
                );
                $.each(result, function (val, text) {
                    mySelect.append(
                        $('<option></option>').val(text.val).html(text.text)
                    );
                });
            },
            error: function (result, textStatus, jqXHR) {

            }
        });
    }

    function SaveAndAdd() {
        var proFilePic = $('#imgbox').get(0);
        var filesSelected = document.getElementById("imgbox").files;
        //alert(profilePic);

        var name = $('#txtStudentName').val();
        var fatherName = $('#txtFatherName').val();
        var motherName = $('#txtMotherName').val();
        var localGurdianName = $('#txtlocalGurdianName').val();
        var localGurdianNo = $('#txtlocalGurdianMobileNo').val();
        var presentAddress = $('#txtPresentAddress').val();
        var parmanentAddress = $('#txtParmanentAddress').val();
        var gurdianMobile = $('#txtGurdianMobileNo').val();
        var mobileNo = $('#txtStudentMobileNo').val();
        var email = $('#txtEmail').val();
        var bloodGroup = $('#txtBloodgroup').val();
        var deptId = $('#ddlAdmissionDept').val();
        var batchId = $('#ddlBatch').val();
        var admissionFee = $('#txtAdmissionFee').val();
        var vat = $('#txtVat').val();
        var discount = $('#txtDiscount').val();
        var totalAmount = $('#txtTotalAmount').val();
        var collectionAmnt = $('#txtCollectedAmount').val();
        var dueAmount = $('#txtdueAmount').val();
        var nextPayDate = $('#txtNextPaymentDate').val();
        var remarks = $('#txtRemarks').val();

        if (hdfStdId <= 0 && name == "") {
            toastr.warning("Student Name Required");
            return;
        }
        if (hdfStdId <= 0 && mobileNo == "") {
            toastr.warning("Student Modile No Required");
            return;
        }
        if (hdfStdId <= 0 && deptId < 1) {
            toastr.warning("Select a Department");
            return;
        }
        if (hdfStdId <= 0 && nextPayDate == "") {
            toastr.warning("Select a Next Payment Date");
            return;
        }

        var paymentid = 0;
        if ($('#hdfStudentPaymentId').val() > 0)
            paymentid = $('#hdfStudentPaymentId').val();

        var studentId = 0;
        if (hdfStdId > 0)
            studentId = hdfStdId;
        //alert(hdfStdId);
        var generalInfo = {
            StdId: studentId,
            StudentPaymentId: paymentid,
            StudentName: name,
            FatherName: fatherName,
            MotherName: motherName,
            LocalGurdianName: localGurdianName,
            PresentAddress: presentAddress,
            ParmanentAddress: parmanentAddress,
            LocalGurdianMobile: localGurdianNo,
            StudentMobile: mobileNo,
            GurdianMobile: gurdianMobile,
            Email: email,
            BloodGroup: bloodGroup,
            DepartmentId: deptId,
            BatchId: batchId,
            AddmissionFee: admissionFee,
            Vat: vat,
            Discount: discount,
            CollectedAmount: collectionAmnt,
            NextPayDate: nextPayDate,
            Remarks: remarks
        };

        $('#btnSaveAndAdd').prop('disabled', true);
        $('#btnSave').prop('disabled', true);

        $.ajax({
            url: '/Student/Save',
            type: 'post',
            data: JSON.stringify({ GeneralInfo: generalInfo, certificatesVms: ceritificateList }),
            dataType: 'json',
            async: true,
            contentType: 'application/json',
            success: function (result) {
                if (result.IsSuccess == true) {
                    $('#lblStudentId').text(result.Message);
                    $('#txtPaymentOptionNo').text(result.OptionNo);

                    $('#btnSaveAndAdd').prop('disabled', true);
                    $('#btnSave').prop('disabled', true);

                    var data = new FormData();
                    data.append("MyImages", profilePic);
                    $.ajax({
                        url: '/Student/SaveProfileImage',
                        data: data,
                        type: 'POST',
                        async:true,
                        processData: false,
                        contentType: false,
                        success: function (result1) {
                            debugger;
                            toastr.success('Successfully Saved');
                            window.location = "/Student/Create";
                        }
                    });
                    toastr.success('Successfully Saved');
                    Clear();
                } else toastr.error(result.Message);
            }
        });
    }
    function Save() {
        var proFilePic = $('#imgbox').get(0);
        var filesSelected = document.getElementById("imgbox").files;
        //alert(profilePic);

        var name = $('#txtStudentName').val();
        var fatherName = $('#txtFatherName').val();
        var motherName = $('#txtMotherName').val();
        var localGurdianName = $('#txtlocalGurdianName').val();
        var localGurdianNo = $('#txtlocalGurdianMobileNo').val();
        var presentAddress = $('#txtPresentAddress').val();
        var parmanentAddress = $('#txtParmanentAddress').val();
        var gurdianMobile = $('#txtGurdianMobileNo').val();
        var mobileNo = $('#txtStudentMobileNo').val();
        var email = $('#txtEmail').val();
        var bloodGroup = $('#txtBloodgroup').val();
        var deptId = $('#ddlAdmissionDept').val();
        var batchId = $('#ddlBatch').val();
        var admissionFee = $('#txtAdmissionFee').val();
        var vat = $('#txtVat').val();
        var discount = $('#txtDiscount').val();
        var totalAmount = $('#txtTotalAmount').val();
        var collectionAmnt = $('#txtCollectedAmount').val();
        var dueAmount = $('#txtdueAmount').val();
        var nextPayDate = $('#txtNextPaymentDate').val();
        var remarks = $('#txtRemarks').val();

        if (hdfStdId<=0 && name == "") {
            toastr.warning("Student Name Required");
            return;
        }
        if (hdfStdId <= 0 && mobileNo == "") {
            toastr.warning("Student Modile No Required");
            return;
        }
        if (hdfStdId <= 0 && deptId < 1) {
            toastr.warning("Select a Department");
            return;
        }
        if (hdfStdId <= 0 && nextPayDate == "") {
            toastr.warning("Select a Next Payment Date");
            return;
        }

        var paymentid = 0;
        if ($('#hdfStudentPaymentId').val()>0)
            paymentid = $('#hdfStudentPaymentId').val();

        var studentId = 0;
        if (hdfStdId > 0)
            studentId = hdfStdId;
        //alert(hdfStdId);
        var generalInfo = {
            StdId: studentId,
            StudentPaymentId: paymentid,
            StudentName: name,
            FatherName: fatherName,
            MotherName: motherName,
            LocalGurdianName: localGurdianName,
            PresentAddress: presentAddress,
            ParmanentAddress: parmanentAddress,
            LocalGurdianMobile: localGurdianNo,
            StudentMobile: mobileNo,
            GurdianMobile: gurdianMobile,
            Email: email,
            BloodGroup: bloodGroup,
            DepartmentId: deptId,
            BatchId: batchId,
            AddmissionFee: admissionFee,
            Vat: vat,
            Discount: discount,
            CollectedAmount: collectionAmnt,
            NextPayDate: nextPayDate,
            Remarks: remarks
        };

        $('#btnSave').prop('disabled',true);
        $('#btnSaveAndAdd').prop('disabled', true);

        $.ajax({
            url: '/Student/Save',
            type: 'post',
            data: JSON.stringify({ GeneralInfo: generalInfo, certificatesVms: ceritificateList}),
            dataType: 'json',
            async: true,
            contentType: 'application/json',
            success: function (result) {
                if (result.IsSuccess == true) {
                    $('#lblStudentId').text(result.Message);
                    $('#txtPaymentOptionNo').text(result.OptionNo);

                    $('#btnSave').prop('disabled', true);
                    $('#btnSaveAndAdd').prop('disabled', true);

                    var data = new FormData();
                    data.append("MyImages", profilePic);
                    $.ajax({
                        url: '/Student/SaveProfileImage',
                        data: data,
                        type: 'POST',
                        processData: false,
                        contentType: false,
                        success: function(result1) {

                        }
                    });
                    toastr.success('Successfully Saved');
                } else toastr.error(result.Message);
            }
        });
    }

    function Clear() {
        window.location = "/Student/Create";
    }

    var url = "/CoachingReport/StudentPaymentReceiptFromStudentCreate/";
    function ShowMoneyReceipt() {
        window.open(url + '?PaymentOptionNo=' + $('#txtPaymentOptionNo').text());
    }
    function PrintMoneyReceipt() {
        //window.print();
    }

    function isNumber(evt) {
        var charCode = (evt.which) ? evt.which : evt.keyCode;
        if (charCode != 46 && charCode > 31
            && (charCode < 48 || charCode > 57))
            return false;

        return true;
    }
    var profilePic;
    function readURL(input) {

        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#imgbox').attr('src', e.target.result);
            }
            profilePic = input.files[0];
            reader.readAsDataURL(input.files[0]);
        }
    }

    var ceritificateList = [];

    function Add() {

        var examId = $('#ddlExam').val();
        if (examId == 0)
        {
            toastr.warning("Select A Examination");
            return;
        }
        var examName = $('#ddlExam :selected').text();
        var boardId = $('#ddlBoard').val();
        if (boardId == 0) {
            toastr.warning("Select A Board");
            return;
        }
        var boardName = $('#ddlBoard :selected').text();
        var sesId = $('#ddlSession').val();
        if (sesId == 0) {
            toastr.warning("Select A Year");
            return;
        }
        var sessYear = $('#ddlSession :selected').text();
        var deptId = $('#ddlDept').val();
        if (deptId == 0) {
            toastr.warning("Select A Department");
            return;
        }
        var deptName = $('#ddlDept :selected').text();
        var insId = $('#ddlInstitute').val();
        if (insId == 0) {
            toastr.warning("Select A Institute");
            return;
        }
        var intName = $('#ddlInstitute :selected').text();
        var result = $('#txtResult').val();

        if (result == '')
        {
            toastr.warning("Give your result");
            return;
        }

        var ceritificate = [];

        ceritificate.push({
            ExamId: examId,
            ExamName: examName,
            BoardId: boardId,
            BoardName: boardName,
            YearId: sesId,
            Year: sessYear,
            DeptId: deptId,
            DepartmentName: deptName,
            InstId: insId,
            InstituteName: intName,
            Result: result,
            Delete: "<div class = 'btnDelete'  title = 'Delete' onclick='DeleteCertificate(" + examId + ")'>Delete</div>"
        });

        var chck = 0;
        if (ceritificateList.length > 0) {
            $.grep(ceritificateList, function (item) {
                if (item.ExamId == examId) {
                    toastr.warning('Already Added');
                    chck = 1;
                }
            });
        }

        if (chck == 0) {
            ceritificateList.push(ceritificate[0]);
        }

        $('#tblCertificates').datagrid('loadData', ceritificateList);

    }


</script>

</head>
<body>

        <div style="padding: 0px; width: 100%;overflow: visible">
            <div class="onerow">

                <div class="col8">
                    <h1 style="color: darkgreen">New Student </h1> <br/>Student Id:<label id="lblStudentId"></label>
                    <input id="hdfStudentId" hidden="hidden" type="text"/>
                    <input id="hdfStudentPaymentId" hidden="hidden" type="text" />
                </div>
                <div class="col2">Photo:

                    @*<img src="~/Content/profilePic.jpg" alt="" id="imgbox" width="40" height="40"/>*@
                    <img src="@Url.Content(Model.ImageUrl)" id="imgbox" alt=" image" width="40" height="40" />
                    <input type="file" id="btnFile"/>
                </div>
            </div>
            
            <div class="onerow">
                <div class="col2">
                    Name:<font face="verdana" color="red">*</font>
                </div>
                <div class="col3">
                    <input id="txtStudentName" type="text" />
                </div>
                <div class="col3"></div>
                <div class="col3">
                    @*<input id="stdNameEng" type="text" />*@
                </div>
            </div>
            <div class="onerow">
                <div class="col2">Father's Name</div>
                <div class="col3">
                    <input id="txtFatherName" type="text" />
                </div>
                <div class="col3">Mother's Name</div>
                <div class="col3">
                    <input id="txtMotherName" type="text" />
                </div>
            </div>
            <div class="onerow">
                <div class="col2">Local Gurdian</div>
                <div class="col3">
                    <input id="txtlocalGurdianName" type="text" />
                </div>
                <div class="col3">Local Gurdian Mobile No.</div>
                <div class="col3">
                    <input id="txtlocalGurdianMobileNo" type="text" />
                </div>
            </div>
            <div class="onerow">
                <div class="col2">Present Address</div>
                <div class="col3">
                    <textarea id="txtPresentAddress"></textarea>

                </div>
                <div class="col3">Parmanent Address</div>
                <div class="col3">
                    <textarea id="txtParmanentAddress"></textarea>
                </div>
            </div>
            <div class="onerow">
                <div class="col2">Gurdian Mobile No.</div>
                <div class="col3">
                    <input id="txtGurdianMobileNo" onkeypress="return isNumber(event)" type="text" />
                </div>
                <div class="col3">Student Mobile No <font face="verdana" color="red">*</font>
                </div>
                <div class="col3">
                    <input id="txtStudentMobileNo" type="text" onkeypress="return isNumber(event)" />
                </div>
            </div>
            <div class="onerow">
                <div class="col2">E-Mail</div>
                <div class="col3">
                    <input id="txtEmail" type="text" />
                </div>
                <div class="col3">Blood Group</div>
                <div class="col3">
                    <input id="txtBloodgroup" type="text" />
                </div>
            </div>
            <div class="onerow">
                <div class="col2">Department <font face="verdana" color="red">*</font></div>
                <div class="col3">
                    <select id="ddlAdmissionDept" style="width: 95%; padding: 5px;"></select>
                </div>
                <div class="col3">Batch</div>
                <div class="col3">
                    <select id="ddlBatch" style="width: 95%; padding: 5px;"></select>
                </div>
            </div>
            <div class="onerow">
                <div style="width: 20%; text-align: center; float: left">Examination</div>
                <div style="width: 15%; text-align: center; float: left">Board</div>
                <div style="width: 10%; text-align: center; float: left">Passing Year</div>
                <div style="width: 10%; text-align: center; float: left">Major</div>
                <div style="width: 20%; text-align: center; float: left">Institute </div>
                <div style="width: 10%; text-align: center; float: left">Result</div>
                
            </div>
            <div class="onerow">
                <div style="width: 20%; float: left; ">
                    <select id="ddlExam" style="width: 95%; padding: 5px;"></select>
                </div>
                <div style="width: 15%; float: left; ">
                    <select id="ddlBoard" style="width: 95%; padding: 5px;"></select>
                </div>
                <div style="width: 10%; float: left;">
                    <select id="ddlSession" style="width: 95%; padding: 5px;"></select>
                 
                </div>
                <div style="width: 10%; float: left; ">
                    <select id="ddlDept" style="width: 95%; padding: 5px;"></select>
                </div>
                <div style="width: 20%; float: left; ">
                    <select id="ddlInstitute" style="width: 95%; padding: 5px;"></select>
                </div>
                <div style="width: 15%; float: left;">
                    <input type="text" style="width: 70%; text-align: right; padding: 5px; " onkeypress="return isNumber(event)" id="txtResult" />
                </div>
                <div style="width: 10%; float: left">
                    <input class="br-buttons" type="button" value="Add" onclick="Add()"/>
                </div>
                <br/>
            </div>
        <div class="onerow">
            <br/>
            <table id="tblCertificates" class="easyui-datagrid" toolbar="#toolbar" autorowheight="true"
                   fitcolumns="true"
                   singleselect="true"
                   @*url="@Url.Action("LoadData")"*@
                   rownumbers="false"
                   pagination="true"
                   pagesize="10">
                <thead>
                <tr>
                    <th field="ExamId" hidden="true"></th>
                    <th field="BoardId" hidden="true"></th>
                    <th field="YearId" hidden="true"></th>
                    <th field="DeptId" hidden="true"></th>
                    <th field="InstId" hidden="true"></th>

                    <th field="ExamName" width="140" sortable="true">Examination</th>
                    <th field="BoardName" width="90" sortable="true">Board</th>
                    <th field="Year" width="100" sortable="true">Session</th>
                    <th field="DepartmentName" width="100" sortable="true">Department</th>
                    <th field="InstituteName" width="150" sortable="true">Institute</th>
                    <th field="Result" width="140" sortable="true">Result</th>
                    <th field="Delete"></th>
                </tr>
                </thead>
            </table>

        </div>
        <div class="onerow">
            <br/>
        </div>
            <div class="onerow">
                <div class="col2">Addmission Fee <font face="verdana" color="red">*</font></div>
                <div class="col3">
                    <input id="txtAdmissionFee" onkeypress="return isNumber(event)" type="text" />TK.
                </div>
                <div class="col3">Vat <font face="verdana" color="red">*</font></div>
                <div class="col3">
                    <input id="txtVat" onkeypress="return isNumber(event)" readonly="readonly" style="text-align: right" disabled="disabled" type="text"/>
                    <label id="lblvattype" title="Vat Type" ></label>
                    <input id="txtVatType" type="text" hidden="hidden" />
                </div>
            </div>
            <div class="onerow">
                <div class="col2">Discount <font face="verdana" color="red">*</font></div>
                <div class="col3">
                    <input id="txtDiscount" onkeypress="return isNumber(event)" type="text" />TK.
                </div>
                <div class="col3">Total</div>
                <div class="col3">
                    <input id="txtTotalAmount" onkeypress="return isNumber(event)" type="text" />TK.
                </div>
            </div>
            <div class="onerow">
                <div class="col2">Payment <font face="verdana" color="red">*</font></div>
                <div class="col3">
                    <input id="txtCollectedAmount" onkeypress="return isNumber(event)" type="text" />TK.
                </div>
                <div class="col3">Due</div>
                <div class="col3">
                    <input id="txtdueAmount" onkeypress="return isNumber(event)" type="text" />TK.
                </div>
            </div>
            <div class="onerow">
                <div class="col2">Remarks</div>
                <div class="col3">
                    <textarea id="txtRemarks"></textarea>
                </div>
                <div class="col3">Next Payment Date <font face="verdana" color="red">*</font></div>
                <div class="col3">
                    <input id="txtNextPaymentDate" type="text"/>
                </div>
            </div>
        <div class="onerow" style="align-content: center">
            <br/>
            <br/>
            <input id="btnSave" type="button" class="br-buttons" value="Save" onclick="Save()"/>
            <input id="btnSaveAndAdd" type="button" class="br-buttons" value="Add" onclick="SaveAndAdd()" />
            <input id="btnMoneyReceipt" type="button" class="br-buttons" value="Money Receipt" onclick="ShowMoneyReceipt()"/>
            <input id="btnClear" type="button" class="br-buttons" value="Clear" onclick="Clear()" />

        </div>
        
        </div>
</body>
</html>
